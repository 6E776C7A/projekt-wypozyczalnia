{% extends "base.twig" %}

{% block content %}
    <form method="GET" action="/">
        <input type="hidden" name="action" value="search">
        <label>Od: <input type="date" name="date_from" value="{{ dates.from }}"></label>
        <label>Do: <input type="date" name="date_to" value="{{ dates.to }}"></label>
        
        <!-- Filtry -->
        <select name="skrzynia">
            <option value="">Dowolna skrzynia</option>
            <option value="Automatyczna">Automatyczna</option>
            <option value="Manualna">Manualna</option>
        </select>
        <!-- ... inne filtry i sortowanie ... -->
        
        <button type="submit">Szukaj</button>
    </form>

    {% if cars is defined %}
        <div class="car-list">
            {% for car in cars %}
                <div class="car-item">
                    <h3>{{ car.marka }} {{ car.model }}</h3>
                    <p>Kategoria: {{ car.kategoria }}</p>
                    <p>Miejsca: {{ car.liczba_miejsc }}</p>
                    <p>Skrzynia: {{ car.skrzynia_biegow }}</p>
                    <p class="price">Cena za wybrany okres: {{ car.calculated_price }} PLN</p>
                    <form method="POST" action="/?action=book">
                        <input type="hidden" name="car_id" value="{{ car.id }}">
                        <input type="hidden" name="date_from" value="{{ dates.from }}">
                        <input type="hidden" name="date_to" value="{{ dates.to }}">
                        <input type="email" name="email" placeholder="Twój e-mail" required>
                        
                        {# Tutaj dołączamy reCAPTCHA #}
                        {% include 'partials/recaptcha.twig' %}
                        
                        <button type="submit">Rezerwuj</button>
                    </form>
                </div>
            {% else %}
                <p>Brak dostępnych samochodów w wybranym terminie.</p>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}